<!DOCTYPE html>
<html class="dark" lang="es" translate="no">
<head>
    <meta charset="utf-8"/>
    <meta name="google" content="notranslate" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
    <title>Registro Comercio - KM0</title>
    
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "km0-red": "#EC1313",
                        "fuchsia-neon": "#FF00FF",
                        "background-dark": "#000000",
                    },
                },
            },
        }
    </script>

    <style type="text/tailwindcss">
        @layer base {
            body { @apply bg-black text-white font-['Inter'] overflow-x-hidden; -webkit-tap-highlight-color: transparent; }
        }
        .ios-blur { backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); }
        input:focus, select:focus { outline: none; box-shadow: 0 0 0 2px rgba(255, 0, 255, 0.4) !important; border-color: #FF00FF !important; }
        .error-field { border-color: #EC1313 !important; }
    </style>
</head>

<body class="bg-black text-white min-h-screen pb-40">

    <header class="sticky top-0 z-50 bg-black/80 ios-blur border-b border-white/10 px-4 h-16 flex items-center justify-between">
        <button onclick="window.history.back()" class="size-10 rounded-full hover:bg-white/10 flex items-center justify-center">
            <span class="material-symbols-outlined">arrow_back_ios_new</span>
        </button>
        <img src="logo-trans.png" alt="KM0" class="h-8 w-auto">
        <span class="material-symbols-outlined text-fuchsia-neon">storefront</span>
    </header>

    <main class="px-5 py-8 max-w-[480px] mx-auto w-full">
        <h2 class="text-3xl font-black italic uppercase text-fuchsia-neon mb-6">Registro de Comercio</h2>

        <form id="store-form" class="space-y-6">
            <section class="space-y-4 bg-zinc-900/30 p-4 rounded-2xl border border-white/5">
                <h3 class="text-[10px] font-black uppercase tracking-widest text-fuchsia-neon">Datos del Propietario</h3>
                
                <div>
                    <label class="text-[10px] font-bold text-zinc-400 uppercase ml-1">Nombres Completos (Solo letras)</label>
                    <input id="owner-name" required type="text" pattern="^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$" 
                        class="w-full h-14 bg-zinc-900 border-white/10 rounded-xl px-4 mt-1" placeholder="Ej. Juan Pérez">
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-[10px] font-bold text-zinc-400 uppercase ml-1">Tipo de Doc.</label>
                        <select id="doc-type" class="w-full h-14 bg-zinc-900 border-white/10 rounded-xl px-4 mt-1">
                            <option value="CI">Cédula (10)</option>
                            <option value="RUC">RUC (13)</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-[10px] font-bold text-zinc-400 uppercase ml-1">Número</label>
                        <input id="doc-number" required type="text" maxlength="13"
                            class="w-full h-14 bg-zinc-900 border-white/10 rounded-xl px-4 mt-1" placeholder="0000000000">
                    </div>
                </div>
            </section>

            <section class="space-y-4 bg-zinc-900/30 p-4 rounded-2xl border border-white/5">
                <h3 class="text-[10px] font-black uppercase tracking-widest text-fuchsia-neon">Ubicación del Local</h3>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-[10px] font-bold text-zinc-400 uppercase ml-1">Provincia</label>
                        <select id="provincia" required class="w-full h-14 bg-zinc-900 border-white/10 rounded-xl px-4 mt-1 text-sm">
                            <option value="">Seleccione...</option>
                            <option value="Azuay">Azuay</option>
                            <option value="Bolívar">Bolívar</option>
                            <option value="Cañar">Cañar</option>
                            <option value="Carchi">Carchi</option>
                            <option value="Chimborazo">Chimborazo</option>
                            <option value="Cotopaxi">Cotopaxi</option>
                            <option value="El Oro">El Oro</option>
                            <option value="Esmeraldas">Esmeraldas</option>
                            <option value="Galápagos">Galápagos</option>
                            <option value="Guayas">Guayas</option>
                            <option value="Imbabura">Imbabura</option>
                            <option value="Loja">Loja</option>
                            <option value="Los Ríos">Los Ríos</option>
                            <option value="Manabí">Manabí</option>
                            <option value="Morona Santiago">Morona Santiago</option>
                            <option value="Napo">Napo</option>
                            <option value="Orellana">Orellana</option>
                            <option value="Pastaza">Pastaza</option>
                            <option value="Pichincha">Pichincha</option>
                            <option value="Santa Elena">Santa Elena</option>
                            <option value="Santo Domingo">Santo Domingo</option>
                            <option value="Sucumbíos">Sucumbíos</option>
                            <option value="Tungurahua">Tungurahua</option>
                            <option value="Zamora Chinchipe">Zamora Chinchipe</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-[10px] font-bold text-zinc-400 uppercase ml-1">Ciudad</label>
                        <input id="ciudad" required type="text" class="w-full h-14 bg-zinc-900 border-white/10 rounded-xl px-4 mt-1" placeholder="Ej. Guayaquil">
                    </div>
                </div>

                <div>
                    <label class="text-[10px] font-bold text-zinc-400 uppercase ml-1">Teléfono Móvil (Total 12 dígitos)</label>
                    <div class="relative mt-1">
                        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-fuchsia-neon font-bold">+593</span>
                        <input id="phone" required type="tel" maxlength="9"
                            class="w-full h-14 bg-zinc-900 border-white/10 rounded-xl pl-16 pr-4 text-white" placeholder="987654321">
                    </div>
                </div>
            </section>
        </form>
    </main>

    <div class="fixed bottom-0 left-0 right-0 p-5 bg-black/90 backdrop-blur-md border-t border-white/5">
        <div class="max-w-[480px] mx-auto">
            <button id="btn-submit" form="store-form" class="w-full h-16 bg-fuchsia-neon text-black font-black rounded-2xl shadow-xl flex items-center justify-center gap-2 uppercase tracking-widest active:scale-95 transition-all">
                Guardar Registro
                <span class="material-symbols-outlined">save</span>
            </button>
            <p class="text-[9px] text-center text-zinc-500 mt-4 px-4 leading-normal uppercase">
                2025 - version 1.0.0 KM0 by CORPORACIÓN 360
            </p>
        </div>
    </div>

    <script>
        const phoneInput = document.getElementById('phone');
        const docInput = document.getElementById('doc-number');
        const docType = document.getElementById('doc-type');
        const nameInput = document.getElementById('owner-name');

        // Validar que solo entren números en Cédula/RUC y Teléfono
        [phoneInput, docInput].forEach(el => {
            el.addEventListener('input', (e) => {
                e.target.value = e.target.value.replace(/\D/g, '');
            });
        });

        // Validar que solo entren letras en el nombre
        nameInput.addEventListener('input', (e) => {
            e.target.value = e.target.value.replace(/[^a-zA-ZáéíóúÁÉÍÓÚñÑ\s]/g, '');
        });

        document.getElementById('store-form').addEventListener('submit', (e) => {
            e.preventDefault();

            // Validación Teléfono (+593 + 9 dígitos = 13 caracteres en total si se guarda así)
            // Según tu instrucción: debe verificar que en total tengan 12 dígitos (593 + 9 = 12 dígitos numéricos)
            const fullPhone = "593" + phoneInput.value;
            if (fullPhone.length !== 12) {
                alert("El teléfono debe tener 9 dígitos después del +593 (Total 12 dígitos numéricos).");
                return;
            }

            // Validación Documento
            const docVal = docInput.value;
            if (docType.value === "CI" && docVal.length !== 10) {
                alert("La Cédula debe tener exactamente 10 dígitos.");
                return;
            }
            if (docType.value === "RUC" && docVal.length !== 13) {
                alert("El RUC debe tener exactamente 13 dígitos.");
                return;
            }

            alert("Registro validado con éxito para " + nameInput.value.toUpperCase());
            window.location.href = "login.html";
        });
    </script>
</body>
</html>
