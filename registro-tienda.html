<!DOCTYPE html>
<html class="dark" lang="es">
<head>
    <meta charset="utf-12"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Registro de Tienda - Kilómetro Cero</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@100..700&display=swap" rel="stylesheet"/>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#FF00FF",
                        "fuchsia-neon": "#FF00FF",
                        "background-light": "#f8f6f6",
                        "background-dark": "#0A0A0A",
                    },
                    fontFamily: { "display": ["Inter"] },
                },
            },
        }
    </script>
    <style type="text/tailwindcss">
        :root { --primary-fuchsia: #FF00FF; }
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; min-height: 100dvh; }
        .ios-blur { backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); }
        .fuchsia-glow { text-shadow: 0 0 10px rgba(255, 0, 255, 0.4); }
        .input-focus-ring:focus { box-shadow: 0 0 0 2px rgba(255, 0, 255, 0.5); }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 font-display min-h-screen flex flex-col">

<header class="sticky top-0 z-50 bg-background-light/80 dark:bg-background-dark/80 ios-blur border-b border-slate-200 dark:border-white/10 px-4 h-16 flex items-center justify-between">
    <button onclick="window.history.back()" class="flex items-center justify-center size-10 rounded-full hover:bg-slate-200 dark:hover:bg-white/10 transition-colors">
        <span class="material-symbols-outlined text-2xl">arrow_back_ios_new</span>
    </button>
    
    <div class="flex items-center gap-2">
        <img src="logo-trans.png" alt="KM0" class="h-8 w-auto">
        <div class="flex flex-col">
            <span class="text-[9px] uppercase tracking-widest font-black text-fuchsia-neon fuchsia-glow leading-none">Kilómetro 0</span>
            <h1 class="text-[11px] font-bold leading-none uppercase">Registro Tienda</h1>
        </div>
    </div>
    
    <div class="size-10 flex items-center justify-center">
        <span class="material-symbols-outlined text-fuchsia-neon text-xl">storefront</span>
    </div>
</header>

<main class="flex-1 overflow-y-auto px-5 py-8 max-w-[480px] mx-auto w-full">
    <div class="mb-10 text-center sm:text-left">
        <h2 class="text-3xl font-black tracking-tight mb-3 text-slate-900 dark:text-white uppercase italic">Nueva Tienda</h2>
        <p class="text-slate-500 dark:text-slate-400 text-sm leading-relaxed">Completa los datos de tu establecimiento para unirte a la red logística de Corporación 360.</p>
    </div>

    <form id="form-tienda" class="space-y-8 pb-56">
        <section class="space-y-4">
            <h3 class="text-[11px] font-bold uppercase tracking-[0.1em] text-fuchsia-neon/90 px-1">Información del Establecimiento</h3>
            <label class="block">
                <span class="text-xs font-semibold mb-1.5 block px-1 text-slate-600 dark:text-slate-300">Nombre Comercial de la Tienda</span>
                <input id="nombre-tienda" class="w-full h-14 bg-white dark:bg-[#1A1A1A] border border-slate-200 dark:border-white/10 rounded-2xl px-4 text-base focus:border-fuchsia-neon focus:ring-0 input-focus-ring transition-all outline-none" placeholder="Ej. Tienda El Rosado" required type="text"/>
            </label>
        </section>

        <section class="space-y-4">
            <h3 class="text-[11px] font-bold uppercase tracking-[0.1em] text-fuchsia-neon/90 px-1">Identidad Legal (Propietario)</h3>
            <div class="space-y-4">
                <label class="block">
                    <span class="text-xs font-semibold mb-1.5 block px-1 text-slate-600 dark:text-slate-300">Nombres y Apellidos Completos</span>
                    <input id="nombre-input" class="w-full h-14 bg-white dark:bg-[#1A1A1A] border border-slate-200 dark:border-white/10 rounded-2xl px-4 text-base focus:border-fuchsia-neon focus:ring-0 input-focus-ring transition-all outline-none" placeholder="Solo letras" required type="text"/>
                </label>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <label class="block">
                        <span class="text-xs font-semibold mb-1.5 block px-1 text-slate-600 dark:text-slate-300">Tipo Documento</span>
                        <select id="tipo-doc" class="w-full h-14 bg-white dark:bg-[#1A1A1A] border border-slate-200 dark:border-white/10 rounded-2xl px-4 text-base focus:border-fuchsia-neon outline-none transition-all">
                            <option value="CI">Cédula (10)</option>
                            <option value="RUC">RUC (13)</option>
                        </select>
                    </label>
                    <label class="block">
                        <span class="text-xs font-semibold mb-1.5 block px-1 text-slate-600 dark:text-slate-300">Número de Identificación</span>
                        <input id="doc-input" class="w-full h-14 bg-white dark:bg-[#1A1A1A] border border-slate-200 dark:border-white/10 rounded-2xl px-4 text-base focus:border-fuchsia-neon focus:ring-0 input-focus-ring transition-all outline-none" placeholder="Solo números" required type="text"/>
                    </label>
                </div>
            </div>
        </section>

        <section class="space-y-4">
            <h3 class="text-[11px] font-bold uppercase tracking-[0.1em] text-fuchsia-neon/90 px-1">Ubicación y Contacto</h3>
            <div class="space-y-4">
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <label class="block">
                        <span class="text-xs font-semibold mb-1.5 block px-1 text-slate-600 dark:text-slate-300">Provincia (Ecuador)</span>
                        <select id="provincia" class="w-full h-14 bg-white dark:bg-[#1A1A1A] border border-slate-200 dark:border-white/10 rounded-2xl px-4 text-base focus:border-fuchsia-neon outline-none transition-all" required>
                            <option value="">Seleccionar...</option>
                            <option value="Azuay">Azuay</option><option value="Bolívar">Bolívar</option><option value="Cañar">Cañar</option><option value="Carchi">Carchi</option>
                            <option value="Chimborazo">Chimborazo</option><option value="Cotopaxi">Cotopaxi</option><option value="El Oro">El Oro</option><option value="Esmeraldas">Esmeraldas</option>
                            <option value="Galápagos">Galápagos</option><option value="Guayas">Guayas</option><option value="Imbabura">Imbabura</option><option value="Loja">Loja</option>
                            <option value="Los Ríos">Los Ríos</option><option value="Manabí">Manabí</option><option value="Morona Santiago">Morona Santiago</option><option value="Napo">Napo</option>
                            <option value="Orellana">Orellana</option><option value="Pastaza">Pastaza</option><option value="Pichincha">Pichincha</option><option value="Santa Elena">Santa Elena</option>
                            <option value="Santo Domingo">Santo Domingo</option><option value="Sucumbíos">Sucumbíos</option><option value="Tungurahua">Tungurahua</option><option value="Zamora Chinchipe">Zamora Chinchipe</option>
                        </select>
                    </label>
                    <label class="block">
                        <span class="text-xs font-semibold mb-1.5 block px-1 text-slate-600 dark:text-slate-300">Ciudad</span>
                        <input class="w-full h-14 bg-white dark:bg-[#1A1A1A] border border-slate-200 dark:border-white/10 rounded-2xl px-4 text-base focus:border-fuchsia-neon focus:ring-0 input-focus-ring transition-all outline-none" placeholder="Ej. Manta" required type="text"/>
                    </label>
                </div>
                <label class="block">
                    <span class="text-xs font-semibold mb-1.5 block px-1 text-slate-600 dark:text-slate-300">Teléfono Móvil (+593)</span>
                    <div class="relative">
                        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-fuchsia-neon font-bold">+593</span>
                        <input id="tel-input" class="w-full h-14 bg-white dark:bg-[#1A1A1A] border border-slate-200 dark:border-white/10 rounded-2xl pl-16 pr-4 text-base focus:border-fuchsia-neon focus:ring-0 input-focus-ring transition-all outline-none" placeholder="987654321" required type="tel"/>
                    </div>
                </label>
                <label class="block">
                    <span class="text-xs font-semibold mb-1.5 block px-1 text-slate-600 dark:text-slate-300">Correo Electrónico Seguridad</span>
                    <div class="relative">
                        <input id="email-input" class="w-full h-14 bg-white dark:bg-[#1A1A1A] border border-slate-200 dark:border-white/10 rounded-2xl pl-12 pr-4 text-base focus:border-fuchsia-neon focus:ring-0 input-focus-ring transition-all outline-none" placeholder="tienda@k0.com" required type="email"/>
                        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 material-symbols-outlined">mail</span>
                    </div>
                </label>
            </div>
        </section>
    </form>
</main>

<div class="fixed bottom-0 left-0 right-0 p-5 bg-gradient-to-t from-background-light dark:from-background-dark via-background-light/95 dark:via-background-dark/95 to-transparent">
    <div class="max-w-[480px] mx-auto">
        <button id="btn-registrar" form="form-tienda" class="w-full h-16 bg-fuchsia-neon text-white font-black text-lg rounded-2xl shadow-2xl shadow-fuchsia-neon/30 active:scale-[0.98] transition-all flex items-center justify-center gap-3 uppercase tracking-wide" type="submit">
            Guardar y Registrar
            <span class="material-symbols-outlined font-bold">arrow_forward</span>
        </button>
        
        <p class="text-[10px] text-center text-slate-500 dark:text-slate-400 mt-4 px-4 leading-normal uppercase font-bold">
            2025 - version 1.0.0 KM0 by CORPORACIÓN 360
        </p>

        <p class="text-[8px] text-fuchsia-neon/60 font-medium text-center uppercase tracking-widest leading-tight mt-2 px-6">
            Aviso: Toda la información legal proporcionada será validada. Inconsistencias causarán el rechazo inmediato.
        </p>
    </div>
</div>

<script>
    const telInput = document.getElementById('tel-input');
    const docInput = document.getElementById('doc-input');
    const tipoDoc = document.getElementById('tipo-doc');
    const nombreInput = document.getElementById('nombre-input');

    // Validación: Solo letras en el nombre
    nombreInput.addEventListener('input', (e) => {
        e.target.value = e.target.value.replace(/[^a-zA-ZáéíóúÁÉÍÓÚñÑ\s]/g, '');
    });

    // Validación: Solo números en Teléfono y Documento
    [telInput, docInput].forEach(el => {
        el.addEventListener('input', (e) => {
            e.target.value = e.target.value.replace(/\D/g, '');
        });
    });

    document.getElementById('form-tienda').addEventListener('submit', (e) => {
        e.preventDefault();
        
        // Validación Teléfono: 593 (3) + 9 dígitos = 12 totales
        if (telInput.value.length !== 9) {
            alert("Error: El teléfono debe tener 9 dígitos después del +593 (Total 12)");
            return;
        }

        // Validación Documento
        if (tipoDoc.value === "CI" && docInput.value.length !== 10) {
            alert("Error: La Cédula debe tener 10 dígitos.");
            return;
        }
        if (tipoDoc.value === "RUC" && docInput.value.length !== 13) {
            alert("Error: El RUC debe tener 13 dígitos.");
            return;
        }

        alert("Solicitud enviada a Corporación 360 para validación legal.");
        window.location.href = "login.html";
    });

    <script>
    // Configuración de la conexión
    const URL_SHEETS = 'https://script.google.com/macros/s/AKfycbzkw3kthx0SHPp0KsmoNK8AmPd6x_Y6MrfdzNXa00C6y-eddWk7BgApe91Z2NSk6v-8/exec';

    // Capturamos el formulario sin importar su diseño
    const formulario = document.querySelector('form');
    const botonEnvio = formulario.querySelector('button[type="submit"]') || formulario.querySelector('button:last-of-type');

    formulario.addEventListener('submit', async (e) => {
        e.preventDefault();

        // Guardamos el texto original para restaurarlo luego
        const textoOriginal = botonEnvio.innerText;
        
        // Efecto visual de carga
        botonEnvio.disabled = true;
        botonEnvio.innerText = 'ENVIANDO...';

        // Obtenemos todos los inputs de tu formulario original
        const inputs = formulario.querySelectorAll('input');
        
        // Mapeamos los datos basándonos en el orden estándar que creaste
        const datos = {
            tipo: 'Tienda',
            nombre: inputs[0] ? inputs[0].value : 'N/A',
            identificacion: inputs[1] ? inputs[1].value : 'N/A',
            telefono: inputs[2] ? inputs[2].value : 'N/A',
            detalles: inputs[3] ? inputs[3].value : 'N/A'
        };

        try {
            // Envío silencioso a Google Sheets
            await fetch(URL_SHEETS, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(datos)
            });

            // Respuesta de éxito
            alert('¡Registro Exitoso! El Ing. Darwin Muñoz revisará su solicitud pronto.');
            formulario.reset();
            window.location.href = 'index.html';

        } catch (error) {
            console.error('Error:', error);
            alert('Hubo un problema con la conexión. Intente nuevamente.');
        } finally {
            // Restauramos el botón a su estado original
            botonEnvio.disabled = false;
            botonEnvio.innerText = textoOriginal;
        }
    });
</script>

</body>
</html>
